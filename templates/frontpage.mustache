{{> theme_boost/head }}

<body {{{ bodyattributes }}}>
{{> core/local/toast/wrapper}}
<div id="page-wrapper" class="d-print-block bg-green">

    {{{ output.standard_top_of_body_html }}}

    {{^isloggedin}}
        <div class="frontpage-menu bg-green">
            <div class="frontpage-menu-logo">
                <h2>{{{frontpage_title}}}</h2 >
            </div>
            <nav class="frontpage-navbar-container" aria-label="{{#str}}sitemenubar, admin{{/str}}">
                <div class="frontpage-navbar-content">
                    <div class="frontpage-navbar-start-buttons">
                        {{! se a tag "a" nÃ£o tiver classe, os links tem um efeito no top e no bottom quando clicado }}
                        <a class="aaa" href="{{config.wwwroot}}">{{{frontpage_buttons_configtextarea.0.label}}}</a>
                        <a class="aaa" href="{{config.wwwroot}}">{{{frontpage_buttons_configtextarea.1.label}}}</a>
                    </div>
                    <div class="frontpage-navbar-end-buttons">
                        <select>
                            <option value="pt-br">ðŸ‡§ðŸ‡·</option>
                            <option value="es">ðŸ‡ªðŸ‡¸</option>
                        </select>
                        <span></span>
                        <a href="{{config.wwwroot}}/auth/suap/" class="primary-button">Acessar</a>
                    </div>
                </div>
            </nav>
        </div>
    {{/isloggedin}}

    <div id="page" data-region="mainpage" data-usertour="scroller" class="drawers drag-container bg-green">
        <div class="container-fluid">   
            <div class="row">
                <div class="col-md-12">
                    <div class="frontpage-hero-header">
                        <div class="frontpage-hero-header-content">
                            <h1>{{{hero_title}}}</h1>
                            <h5>{{{hero_subtitle}}}</h5>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row hero">
                <div class="col-md-3">
                    <div class="frontpage-hero-header-column">
                        <p class="frontpage-hero-header-column-number text-green">{{{hero_first_column_number}}}</p>
                        <p class="frontpage-hero-header-column-title">{{{hero_first_column_description}}}</p>
                        <p class="frontpage-hero-header-column-text">{{{hero_first_column_text}}}</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="frontpage-hero-header-column">
                        <p class="frontpage-hero-header-column-number text-green">{{{hero_second_column_number}}}</p>
                        <p class="frontpage-hero-header-column-title">{{{hero_second_column_description}}}</p>
                        <p class="frontpage-hero-header-column-text">{{{hero_second_column_text}}}</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="frontpage-hero-header-column">
                        <p class="frontpage-hero-header-column-number text-green">{{{hero_third_column_number}}}</p>
                        <p class="frontpage-hero-header-column-title">{{{hero_third_column_description}}}</p>
                        <p class="frontpage-hero-header-column-text">{{{hero_third_column_text}}}</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="frontpage-hero-header-column">
                        <p class="frontpage-hero-header-column-number text-green">{{{hero_fourth_column_number}}}</p>
                        <p class="frontpage-hero-header-column-title">{{{hero_fourth_column_description}}}</p>
                        <p class="frontpage-hero-header-column-text">{{{hero_fourth_column_text}}}</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="topofscroll" class="bg-green">
            <section id="region-main" aria-label="{{#str}}content{{/str}}" class="bg-green">
                <div class="container-fluid">
                    <div class="frontpage-hero-main-header">
                        <div class="frontpage-hero-main-header-about-button">
                            <a class="primary-button">{{{hero_button_text}}}</a>
                        </div>
                        <div class="frontpage-hero-main-header-content">
                            <div class="frontpage-hero-main-header-title">
                                <p>Cursos abertos do IFRN {{{pagination_secret}}}</p>
                            </div>

                            {{! <p>Cursos abertos do IFRN</p> }}
                            <div class=frontpage-hero-main-header-filter>
                                <div>
                                    <i class="fa fa-search"></i>
                                    <input type="text" placeholder="Pesquisar">
                                </div>
                                <button class="primary-button">Filtrar</button>
                            </div>

                            <div class="frontpage-hero-main-header-title aux">
                                <p>Cursos abertos do IFRN</p>
                            </div>
                        </div>
                    </div>

                    {{{ output.main_content }}}

                    {{! <div id="course-area"> }}
                        {{! {{{ output.main_content }}
                    {{! </div> }}

                    <div class="pagination">
                        <button id="prev-page" class="pagination-button" page="0">Anterior</button>
                        <span id="page-info"></span>
                        <button id="next-page" class="pagination-button" page="0">PrÃ³ximo</button>
                    </div>
                </div>
            </section>
            {{! <div id="page-content" class="d-print-block main-inner bg-green">
                <div id="region-main-box">
                </div>
            </div> }}
        </div>
        
        {{! {{> theme_boost/footer }}
    </div>
    
    {{{ output.standard_after_main_region_html }}}
</div>

<script>
let currentPage = 0;
const limit = 4;

async function loadCourses(page, limit = 4, search = '') {
    try {
        const response = await fetch(`{{{ baseurl }}}/theme/suap/ajax_get_courses.php?page=${page}&limit=${limit}&search=${search}`);
        const courses = await response.json();
        console.log(courses);

        const courseArea = document.querySelector('.course-area');
        courseArea.innerHTML = '';

        courses.forEach(course => {
            courseArea.innerHTML += `
                <div class="course-card">
                    <div class="course-image-container">
                        <img src="${course.image_url}" alt="${course.fullname}" class="course-image">
                    </div>
                    <span class="course-category">${course.category_name}</span>
                    <p class="course-name">${course.fullname}</p>
                </div>
            `;
        });

        updatePaginationButtons();
    } catch (error) {
        console.error('Error fetching courses:', error);
    }
}

function updatePaginationButtons() {
    const prev = document.querySelector('#prev-page');
    const next = document.querySelector('#next-page');
    
    prev.disabled = currentPage === 0;
    next.setAttribute('page', currentPage + 1);
    prev.setAttribute('page', currentPage - 1);
}

document.querySelector('#prev-page').addEventListener('click', () => {
    if (currentPage > 0) {
        currentPage--;
        loadCourses(currentPage, limit);
    }
});

document.querySelector('#next-page').addEventListener('click', () => {
    currentPage++;
    loadCourses(currentPage, limit);
});

loadCourses(currentPage, limit);

</script>

</body>
</html>

{{#js}}
require(['theme_suap/helloworld'], (module) => module.init());
{{/js}}

{{#js}}
M.util.js_pending('theme_boost/loader');
require(['theme_boost/loader', 'theme_boost/drawer'], function(Loader, Drawer) {
    Drawer.init();
    M.util.js_complete('theme_boost/loader');
});
{{/js}}

